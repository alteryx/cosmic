
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Contributing &mdash; Cosmic 0.0.1-SNAPSHOT documentation</title>
    
    <link rel="stylesheet" href="_static/cosmic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cosmic 0.0.1-SNAPSHOT documentation" href="index.html" />
    <link rel="prev" title="Recipes" href="recipes.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="recipes.html" title="Recipes"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Cosmic 0.0.1-SNAPSHOT documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="writing-new-plugins">
<h2>Writing new plugins<a class="headerlink" href="#writing-new-plugins" title="Permalink to this headline">¶</a></h2>
<p>Writing Cosmic plugins is fairly straightforward, but in order to keep the API consistent, there are a few rules and suggestions</p>
<div class="section" id="ruby-1-8-x-vs-1-9-ruby-vs-jruby">
<h3>Ruby 1.8.x vs. 1.9, Ruby vs. JRuby<a class="headerlink" href="#ruby-1-8-x-vs-1-9-ruby-vs-jruby" title="Permalink to this headline">¶</a></h3>
<p>In general, plugins should work with both Ruby &amp; JRuby, 1.8.7 and 1.9.x versions, unless 1.9 or JRuby are absolutely needed. In particular, Ruby 1.9-specific syntax should be avoided unless the plugin requires Ruby 1.9.</p>
</div>
<div class="section" id="cosmic-environment-integration">
<h3>Cosmic environment integration<a class="headerlink" href="#cosmic-environment-integration" title="Permalink to this headline">¶</a></h3>
<p>Plugins should use the environment&#8217;s authentication system (if they need authentication) as much as possible. Likewise, plugins should not log directly to a file or <tt class="docutils literal"><span class="pre">stdout</span></tt>/<tt class="docutils literal"><span class="pre">stderr</span></tt>, but instead generate messages tagged with standard tags such as <tt class="docutils literal"><span class="pre">:debug</span></tt>, <tt class="docutils literal"><span class="pre">:info</span></tt> and <tt class="docutils literal"><span class="pre">:error</span></tt>, plus the plugin&#8217;s name so that scripts and other plugins can operate on all messages from a given plugin.</p>
<p>In addition, if the plugin consumes messages, then the plugin should implement methods called <tt class="docutils literal"><span class="pre">connect</span></tt> and <tt class="docutils literal"><span class="pre">disconnect</span></tt> to provide a user with a consistent API. See the IRC and JIRA plugins for examples.</p>
<p>Cosmic also supports running multiple plugin instances under different names, potentially pointed to the same remote service. It is desirable if plugins support this mode and still be independent of each other.</p>
</div>
<div class="section" id="dry-run-mode">
<h3>Dry-run mode<a class="headerlink" href="#dry-run-mode" title="Permalink to this headline">¶</a></h3>
<p>Plugins should always support dry-run mode, even if they only consume messages. E.g the IRC plugin will not actually connect to the IRC server and write messages to channels. Instead, plugins should generate messages tagged as <tt class="docutils literal"><span class="pre">:dryrun</span></tt> that state what the plugin would do. The exception to this rule is if the plugin needs to for instance query a remote service for the current state of the world. E.g. the Galaxy plugin will issue <tt class="docutils literal"><span class="pre">show</span></tt> commands to Galaxy even in dry-run mode, so that it can return the services to the script.</p>
</div>
<div class="section" id="threading">
<h3>Threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h3>
<p>Cosmic is deliberately single-threaded unless it can&#8217;t be avoided. This means that for instance the message bus will only return from the notify method once all listeners have been notified. Therefore, self referential code such as listening for its own messages should be avoided.</p>
</div>
<div class="section" id="error-handling">
<h3>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h3>
<p>For now, error handling is up to the plugin. All built-in plugins simply pass the error from the underlying library up to the calling script (unless they can handle the error). No error wrapping is performed, primarily because Ruby has unchecked errors anyways.</p>
</div>
<div class="section" id="plugin-api">
<h3>Plugin API<a class="headerlink" href="#plugin-api" title="Permalink to this headline">¶</a></h3>
<p>Plugins should extend the plugin base class which gives them the optional sections capability.
Public methods in the plugin are considered its API and thus should be documented (with <a class="reference external" href="http://yardoc.org/">Yard</a> using <a class="reference external" href="http://daringfireball.net/projects/markdown/">Markdown</a> syntax).
All API methods that have arguments, should only take parameter hashes with symbols as keys. This keeps the API consistent and expressive (named parameters).
API method names should be actions and so the names should be or at least use verbs (e.g. <tt class="docutils literal"><span class="pre">take_snapshot</span></tt> instead of <tt class="docutils literal"><span class="pre">snapshot</span></tt>).
API methods should objects that are useful to the script. For instance, a lot of the JIRA plugin methods deal with JIRA issues. All of these methods return an object representing the JIRA issue which can be passed in again to other methods on the plugin.</p>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>Please provide documentation for the plugin in <a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a> format.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3>All Topics</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">How to use Cosmic</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#writing-new-plugins">Writing new plugins</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="recipes.html"
                        title="previous chapter">Recipes</a></p><h3>Other resources</h3>
<ul>
  <li><a href="api/_index.html">API</a></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="recipes.html" title="Recipes"
             >previous</a> |</li>
        <li><a href="index.html">Cosmic 0.0.1-SNAPSHOT documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Ning.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>